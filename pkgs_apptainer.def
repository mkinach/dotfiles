Bootstrap: docker
From: ubuntu:24.04

%post
    apt-get update
    apt-get install -y \
        vim-gtk3 \
        pipx \
        magic-wormhole \
        python-is-python3 \
        python3-setuptools \
        python3-pip \
        gdb \
        shellcheck \
        nodejs \
        shfmt \
        clang-format \
        build-essential \
        clang \
        cmake \
        python3-dev \
        locales

    # Set up UTF-8 locale
    locale-gen en_US.UTF-8

    # Install pipx tools to a system location
    export PIPX_HOME=/opt/pipx
    export PIPX_BIN_DIR=/opt/pipx/bin
    pip3 install pipx
    pipx install flake8
    pipx install ruff
    pipx install yapf

%environment
    export LANG=en_US.UTF-8
    export LC_ALL=en_US.UTF-8
    export PATH="/opt/pipx/bin:$PATH"

%runscript
    echo "Remote dev environment"
    echo "  vim:       $(vim --version | head -1)"
    echo "  ruff:      $(ruff --version)"
    echo "  clang:     $(clang --version | head -1)"
