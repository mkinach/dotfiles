Bootstrap: docker
From: ubuntu:24.04

%post
    apt-get update

    apt-get install -y \
        git

    apt-get install -y \
        vim-gtk3 \
        pipx \
        magic-wormhole \
        tldr

    # for vimspector/ALE
    apt-get install -y \
        python-is-python3 \
        python3-setuptools \
        gdb \
        shellcheck \
        nodejs \
        shfmt \
        clang-format

    # for YouCompleteMe
    apt-get install -y \
        build-essential \
        clang \
        cmake \
        python3-dev

    # for vimspector/ALE
    export PIPX_HOME=/opt/pipx
    export PIPX_BIN_DIR=/opt/pipx/bin
    pipx install flake8
    pipx install ruff
    pipx install yapf

    # set up UTF-8 locale
    apt-get install -y locales
    locale-gen en_US.UTF-8

%environment
    export LANG=en_US.UTF-8
    export LC_ALL=en_US.UTF-8
    export PATH="/opt/pipx/bin:$PATH"

%runscript
    echo "  vim:       $(vim --version | head -1)"
    echo "  ruff:      $(ruff --version)"
    echo "  clang:     $(clang --version | head -1)"
